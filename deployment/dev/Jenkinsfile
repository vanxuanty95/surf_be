node {
  stage 'checkout'
  git url: 'https://github.com/vanxuanty95/surf_be.git'

  stage 'go build'
  sh 'docker run -i --rm -v $PWD:/go/src/surf_be/ -w /go/src/surf_be golang go build -mod vendor -v -o surf_be.bin .'

  stage 'docker build'
  cd 'go/src/surf_be/deployment/dev'
  docker.build('surf_be')

  stage 'deploy'
  sh './deployment/dev/deploy.sh'
}